(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(39)},27:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(20),r=a.n(l),s=a(8),c=a(9),i=a(11),u=a(10),m=a(12),d=(a(27),a(17)),h="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:b},f=function(){return fetch("".concat(h,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books})},p=function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},k=a(6),E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={selectedOption:"",shelfs:[],book:{}},a.updateshelf=function(e,t){a.setState(function(){return{selectedOption:e,book:t}})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;f().then(function(t){e.setState(function(){return{shelfs:t}})})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.state.selectedOption!==t.selectedOption&&p(this.state.book,this.state.selectedOption).then(function(){console.log("updated"),f().then(function(e){console.log(e),n.setState(function(){return{shelfs:e}})})})}},{key:"render",value:function(){var e=this,t=this.state.shelfs,a=t.filter(function(e){return"currentlyReading"===e.shelf}),n=t.filter(function(e){return"wantToRead"===e.shelf}),l=t.filter(function(e){return"read"===e.shelf});return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a.map(function(t){return o.a.createElement("li",{key:t.id,className:"book-list-item"},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url("+t.imageLinks.smallThumbnail+")"}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(a){return e.updateshelf(a.target.value,t)},value:"currentlyReading"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.authors)))})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n.map(function(t){return o.a.createElement("li",{key:t.id,className:"book-list-item"},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url("+t.imageLinks.smallThumbnail+")"}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(a){return e.updateshelf(a.target.value,t)},value:"wantToRead"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.authors)))})))),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},l.map(function(t){return o.a.createElement("li",{key:t.id,className:"book-list-item"},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url("+t.imageLinks.smallThumbnail+")"}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(a){return e.updateshelf(a.target.value,t)},value:"read"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.authors)))})))))),o.a.createElement("div",{className:"open-search"},o.a.createElement(k.b,{to:"/search",className:"search-book"},"Add")))}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",results:[],infotobeloaded:"",selectedOption:"",book:{}},a.updateshelf=function(e,t){console.log(e),a.setState(function(){return{selectedOption:e,book:t}})},a.updateQuery=function(e){a.setState(function(){return{query:e}})},a.clearQuery=function(){a.updateQuery("")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n,o=this;if(this.state.query!==t.query)if(""===this.state.query)this.setState(function(){return{results:[],infotobeloaded:"  "}});else try{(n=this.state.query,fetch("".concat(h,"/search"),{method:"POST",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:n})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){"empty query"!==e.error?(console.log("hola"),o.setState(function(){return{results:e}})):o.setState(function(){return{results:[],infotobeloaded:"no book matchs your search"}})})}catch(l){console.log(l)}this.state.selectedOption!==t.selectedOption&&(console.log(this.state.selectedOption),console.log(this.state.book),p(this.state.book,this.state.selectedOption).then(function(){console.log("updated")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.query,n=t.results,l=t.infotobeloaded;console.log(n);var r=n.filter(function(e){return null!=e.imageLinks&&null!=e.authors});return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(k.b,{to:"/",className:"close-search"},"close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",className:"search-books",value:a,onChange:function(t){return e.updateQuery(t.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},0===r.length?o.a.createElement("ol",{className:"books-grid"},l):o.a.createElement("ol",{className:"books-grid"},r.map(function(t){return o.a.createElement("li",{key:t.id,className:"result-list-item"},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url("+t.imageLinks.smallThumbnail+")"}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(a){return e.updateshelf(a.target.value,t)},value:"none"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.authors)))}))))}}]),t}(n.Component),y=a(0),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={books:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(y.a,{exact:!0,path:"/",render:function(){return o.a.createElement(E,null)}}),o.a.createElement(y.a,{path:"/search",render:function(e){e.history;return o.a.createElement(g,null)}}))}}]),t}(o.a.Component);a(37);r.a.render(o.a.createElement(k.a,null,o.a.createElement(N,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.e0732c48.chunk.js.map